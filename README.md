# Rogue Game 
Консольная roguelike-игра в духе классической Rogue (1980), реализованная на Go с использованием библиотеки goncurses.

---

## Описание

- 21 случайно сгенерированный уровень подземелий (каждый — 9 комнат, соединённых коридорами).
- Пошаговый геймплей: игрок, враги, предметы, инвентарь, бой, сбор сокровищ.
- Система тумана войны, сохранение прогресса и таблица рекордов.
- Чистая архитектура: разделение на слои **domain** (бизнес-логика), **presentation** (UI), **datalayer** (работа с файлами).

---

## Структура проекта

```
src/
├── main.go                 # Точка входа, игровой цикл, меню
├── go.mod
├── makefile
├── datalayer/              # Работа с файлами сохранения и рекордов (JSON)
│   └── json.go             # Функции для сохранения и загрузки состояния игры и таблицы рекордов в формате JSON: сериализация/десериализация, работа с файлами Save.json и Records.json.
├── domain/                 # Бизнес-логика игры
│   ├── character.go        # Игрок, инвентарь, перемещение, взаимодействие
│   ├── combat.go           # Боевая система
│   ├── enemy.go            # Враги, их типы и поведение
│   ├── game.go             # Игровая сессия, переходы между уровнями
│   ├── item.go             # Предметы, их генерация и эффекты
│   └── level.go            # Генерация уровней, комнат, коридоров
├── presentation/           # Отрисовка, ввод, меню, туман войны
│   ├── fog.go              # Реализация тумана войны: вычисление видимых областей для игрока на уровне.
│   ├── input.go            # Обработка пользовательского ввода: управление персонажем, действия, взаимодействие с инвентарём.
│   ├── menu.go             # Логика главного меню, меню рекордов, отображение и выбор пунктов.
│   └── renderer.go         # Вся отрисовка интерфейса: игровое поле, сообщения, инвентарь, статус игрока, экран Game Over.
```

---

## Основные возможности

- **Генерация уровней:** 21 уникальный уровень, каждый — 9 комнат, соединённых коридорами.
- **Игрок:** здоровье, сила, ловкость, инвентарь (рюкзак до 9 предметов), оружие.
- **Враги:** 5 типов, уникальные характеристики и поведение, дроп сокровищ.
- **Предметы:** оружие, еда, эликсиры, свитки, сокровища.
- **Бой:** пошаговый, с вероятностью попадания и уроном по характеристикам.
- **Туман войны:** видимость только в текущей комнате и ближайших коридорах.
- **Сохранение:** прогресс и рекорды сохраняются в JSON-файлы.
- **Таблица рекордов:** по количеству собранных сокровищ.

---

## Управление

- **WASD** — перемещение
- **h** — использовать оружие из рюкзака
- **j** — съесть еду из рюкзака
- **k** — выпить эликсир из рюкзака
- **e** — прочитать свиток из рюкзака
- **f** — атаковать врага рядом
- **q** — выйти из игры
- **1** — новая игра, **2** — загрузить, **3** — рекорды (в меню)

---

## Запуск

1. Установите Go 1.23+ и [goncurses](https://github.com/rthornton128/goncurses) (требует ncurses).
2. Соберите и запустите игру:
   ```sh
   cd src
   go mod tidy
   make
   ./rogue_game
   ```
   Или напрямую:
   ```sh
   go run main.go
   ```

---

## Сохранения и рекорды

- Прогресс сохраняется в `Save.json` автоматически.
- Таблица рекордов — в `Records.json`.

---

## Примечания

- Игра работает только в терминале с поддержкой ncurses.
- Для MacOS: убедитесь, что установлен пакет `ncurses` (`brew install ncurses`).

---

## Архитектура

- **domain/** — вся логика игры: генерация уровней, бой, предметы, враги, игрок.
- **presentation/** — взаимодействие с пользователем: отрисовка, ввод, меню, туман войны.
- **datalayer/** — сохранение и загрузка прогресса и рекордов (JSON).

---

## Авторы

Emil Iapparov
